function replaceUrlParam(e,t,n){var i=new RegExp("("+t+"=).*?(&|$)"),r=e;return e.search(i)>=0?e.replace(i,"$1"+n+"$2"):r+(r.indexOf("?")>0?"&":"?")+t+"="+n}!function(e){e.fn.prepareTransition=function(){return this.each(function(){var t=e(this);t.one("TransitionEnd webkitTransitionEnd transitionend oTransitionEnd",function(){t.removeClass("is-transitioning")});var n=0;e.each(["transition-duration","-moz-transition-duration","-webkit-transition-duration","-o-transition-duration"],function(e,i){n=parseFloat(t.css(i))||n}),0!=n&&(t.addClass("is-transitioning"),t[0].offsetWidth)})}}(jQuery),"undefined"==typeof Haravan&&(Haravan={}),window.timber=window.timber||{},timber.cacheSelectors=function(){timber.cache={$html:$("html"),$body:$("body"),$navigation:$("#AccessibleNav"),$mobileSubNavToggle:$(".mobile-nav__toggle"),$changeView:$(".change-view")}},timber.init=function(){FastClick.attach(document.body),timber.cacheSelectors(),timber.accessibleNav(),timber.drawersInit(),timber.mobileNavToggle()},timber.accessibleNav=function(){var e=timber.cache.$navigation,t=e.find("a"),n=e.children("li").find("a"),i=e.find(".site-nav--has-dropdown"),r=e.find(".site-nav__dropdown").find("a"),o="nav-hover",a="nav-focus";function s(e){e.removeClass(o),timber.cache.$body.off("touchstart")}function c(e){e.addClass(a)}function d(e){e.removeClass(a)}i.on("mouseenter touchstart",function(e){var t=$(this);t.hasClass(o)||e.preventDefault(),function(e){e.addClass(o),setTimeout(function(){timber.cache.$body.on("touchstart",function(){s(e)})},250)}(t)}),i.on("mouseleave",function(){s($(this))}),r.on("touchstart",function(e){e.stopImmediatePropagation()}),t.focus(function(){!function(e){e.next("ul").hasClass("sub-nav");var t=$(".site-nav__dropdown").has(e).length;t?c(e.closest(".site-nav--has-dropdown").find("a")):(d(n),c(e))}($(this))}),t.blur(function(){d(n)})},timber.drawersInit=function(){timber.LeftDrawer=new timber.Drawers("NavDrawer","left"),timber.RightDrawer=new timber.Drawers("CartDrawer","right",{})},timber.mobileNavToggle=function(){timber.cache.$mobileSubNavToggle.on("click",function(){$(this).parent().toggleClass("mobile-nav--expanded")})},timber.getHash=function(){return window.location.hash},timber.Drawers=function(){var e=function(e,t,n){var i={close:".js-drawer-close",open:".js-drawer-open-"+t,openClass:"js-drawer-open",dirOpenClass:"js-drawer-open-"+t};if(this.$nodes={parent:$("body, html"),page:$("#PageContainer"),moved:$(".is-moved-by-drawer")},this.config=$.extend(i,n),this.position=t,this.$drawer=$("#"+e),!this.$drawer.length)return!1;this.drawerIsOpen=!1,this.init()};return e.prototype.init=function(){$(this.config.open).on("click",$.proxy(this.open,this)),this.$drawer.find(this.config.close).on("click",$.proxy(this.close,this))},e.prototype.open=function(e){var t=!1;if(e?e.preventDefault():t=!0,e&&e.stopPropagation&&(e.stopPropagation(),this.$activeSource=$(e.currentTarget)),this.drawerIsOpen&&!t)return this.close();this.$nodes.moved.addClass("is-transitioning"),this.$drawer.prepareTransition(),this.$nodes.parent.addClass(this.config.openClass+" "+this.config.dirOpenClass),this.drawerIsOpen=!0,this.trapFocus(this.$drawer,"drawer_focus"),this.config.onDrawerOpen&&"function"==typeof this.config.onDrawerOpen&&(t||this.config.onDrawerOpen()),this.$activeSource&&this.$activeSource.attr("aria-expanded")&&this.$activeSource.attr("aria-expanded","true"),this.$nodes.page.on("touchmove.drawer",function(){return!1}),this.$nodes.page.on("click.drawer",$.proxy(function(){return this.close(),!1},this))},e.prototype.close=function(){this.drawerIsOpen&&($(document.activeElement).trigger("blur"),this.$nodes.moved.prepareTransition({disableExisting:!0}),this.$drawer.prepareTransition({disableExisting:!0}),this.$nodes.parent.removeClass(this.config.dirOpenClass+" "+this.config.openClass),this.drawerIsOpen=!1,this.removeTrapFocus(this.$drawer,"drawer_focus"),this.$nodes.page.off(".drawer"))},e.prototype.trapFocus=function(e,t){var n=t?"focusin."+t:"focusin";e.attr("tabindex","-1"),e.focus(),$(document).on(n,function(t){e[0]===t.target||e.has(t.target).length||e.focus()})},e.prototype.removeTrapFocus=function(e,t){var n=t?"focusin."+t:"focusin";e.removeAttr("tabindex"),$(document).off(n)},e}(),$(timber.init);
